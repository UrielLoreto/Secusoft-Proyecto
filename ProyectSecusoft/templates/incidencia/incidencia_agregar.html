{% extends 'base/index.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block css %}
    <style>
.asteriskField {
    display: none;
}
    </style>
    <!-- Bootstrap core CSS -->
    <link href="{% static 'base/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'base/fonts/css/font-awesome.min.css' %}" rel="stylesheet">
    <link href="{% static 'base/css/animate.min.css' %}" rel="stylesheet">
    <!-- Custom styling plus plugins -->
    <link href="{% static 'base/css/custom.css' %}"rel="stylesheet">
    <link href="{% static 'base/css/icheck/flat/green.css' %}"rel="stylesheet">
      <!-- editor -->
    <link href="http://netdna.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css" rel="stylesheet">
    <link href="{% static 'base/css/editor/external/google-code-prettify/prettify.css' %}" rel="stylesheet">
    <link href="{% static 'base/css/editor/index.css' %}" rel="stylesheet">
    <!-- select2 -->
    <link href="{% static 'base/css/select/select2.min.css' %}" rel="stylesheet">
    <!-- switchery -->
    <link rel="stylesheet" href="{% static 'base/css/switchery/switchery.min.css' %}" />
{% endblock %}
{% block content %}
{% block titulo %}
<title>Agregar incidencia - SecuSoft</title>
{% endblock %}
<form method="POST"  class="form-horizontal form-label-left" >
   {% csrf_token %}
   <div class="center" role="main">
      <div class="">
         <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="x_panel">
               <div class="x_title">
                  <h2>Agregar incidencia</h2>
                  <div class="clearfix"></div>
                  <p><small>Datos de la incidencia:</small></p>
                  <div class="clearfix"></div>
               </div>
               <div class="x_content">
                  <table id="datatable-responsive" class="dt-responsive" cellspacing="10" width="100%">
                      <tbody>
                      {% crispy form %}
                      {% crispy form2 %}
                      {% crispy form3 %}
                      <label>Tipo de incidencia:</label>
                      <select name="incidenciaselector"  class="select form-control" id="incidenciaselector" onchange="showDiv(this)">
                          <option value="1" selected="">Administrativa</option>
                          <option value="2">Labor</option>
                          <option value="3">Conducta</option>
                          <option value="4">Otro</option>
                      </select>
                      <br>
                      <div id="Admin" >
                      <label>Incidecia:</label>
                      {% for incidencia in Administrativa %}
                      <select name="incidencia"  class="select form-control" id="id_incidencia">
                          <option value="" selected="">---------</option>
                          <option value="{{ incidencia.id_tipo }}">{{incidencia}}</option>
                      </select>
                      {% endfor %}
                      </div>
                      <div id="Lab" style="display: none">
                      <label>Incidecia:</label>
                      {% for incidencia in Labor %}
                      <select name="incidencia" class="select form-control" id="id_incidencia">
                          <option value="" selected="">---------</option>
                          <option value="{{ incidencia.id_tipo }}">{{incidencia}}</option>
                      </select>
                      </div>
                      {% endfor %}
                      <div id="Cond" style="display: none">
                      <label>Incidecia:</label>
                      {% for incidencia in Conducta %}
                      <select name="incidencia" class="select form-control" id="id_incidencia">
                          <option value="" selected="">---------</option>
                          <option value="{{ incidencia.id_tipo }}">{{incidencia}}</option>
                      </select>
                      {% endfor %}
                      </div>
                      <div id="Otr" style="display: none">
                      <label>Incidecia:</label>
                      {% for incidencia in Otro %}
                      <select name="incidencia"  class="select form-control" id="id_incidencia">
                          <option value="" selected="">---------</option>
                          <option value="{{ incidencia.id_tipo }}">{{incidencia}}</option>
                      </select>
                      {% endfor %}
                      </div>
                     </tbody>
                  </table>
               <br>
                <button class="btn btn-success" type="submit">Agregar</button>
               </div>
            </div>
         </div>
      </div>
   </div>
</form>
{% endblock %}
{% block js %}
<!-- pace -->
<script src="{% static 'base/js/custom.min.js' %}"></script>
<script type="text/javascript" src="{% static 'base/js/moment/moment.min.js' %}"></script>
<script type="text/javascript" src="{% static 'base/js/datepicker/daterangepicker.js' %}"></script>
<script type="text/javascript" src="{% static 'base/js/autocomplete/countries.js' %}"></script>

  <!-- daterangepicker -->
  <script type="text/javascript" src="{% static 'base/js/moment/moment.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'base/js/datepicker/daterangepicker.js' %}"></script>
  <!-- select2 -->
  <script src="{% static 'base/js/select/select2.full.js' %}"></script>
  <script src="{% static 'base/js/autocomplete/jquery.autocomplete.js' %}"></script>
  <script src="{% static 'base/js/validator/validator.js' %}"></script>

  <script type="text/javascript">
    function showDiv(elem){
       if(elem.value == 1){
           document.getElementById('Admin').style.display = "block";
           document.getElementById('Admin').required = true;
           document.getElementById('Lab').style.display = "none";
           document.getElementById('Cond').style.display = "none";
           document.getElementById('Otr').style.display = "none";
       }
        else if(elem.value == 2){
           document.getElementById('Admin').style.display = "none";
           document.getElementById('Lab').style.display = "block";
           document.getElementById('Lab').required = true;
           document.getElementById('Cond').style.display = "none";
           document.getElementById('Otr').style.display = "none";
       }
        else if(elem.value == 3){
           document.getElementById('Admin').style.display = "none";
           document.getElementById('Lab').style.display = "none";
           document.getElementById('Cond').style.display = "block";
           document.getElementById('Cond').required = true;
           document.getElementById('Otr').style.display = "none";
       }
        else if(elem.value == 4){
           document.getElementById('Admin').style.display = "none";
           document.getElementById('Lab').style.display = "none";
           document.getElementById('Cond').style.display = "none";
           document.getElementById('Otr').style.display = "block";
           document.getElementById('Otr').required = true;
       }
    }
  </script>
        <script>
    $(function() {
      $('#id_fecha_incidencia').daterangepicker({
        format: 'YYYY-MM-DD',
        locale: 'es',
        singleDatePicker: true,
        showDropdowns: true,
        defaultDate: new Date('2018-02-01'),
        minDate: new Date('2018-02-01'),
        var: f = new Date(),
        maxDate : (f.getFullYear() + "-" + (f.getMonth() +1) + "-" + f.getDate())
      });
    });
    </script>

{% endblock %}